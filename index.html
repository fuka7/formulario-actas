<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro Cambio de Equipo - MINSAL</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- HEADER -->
<div class="app-header">
    <div class="header-inner">
        <div class="header-logo">üè•</div>
        <div class="header-title">
            <h1>Registro Cambio de Equipo</h1>
            <p>MINISTERIO DE SALUD</p>
        </div>
    </div>
</div>

<div class="container">

    <form id="registroForm">

        <!-- DATOS GENERALES -->
        <section class="card">
            <h2><span class="section-icon">üè¢</span> Datos Generales</h2>

            <div class="grid-2">
                <select id="organismo" required>
                    <option value="">Seleccione Organismo</option>
                </select>
                <input type="text" id="establecimiento" placeholder="Establecimiento" required>
                <input type="text" id="direccion" placeholder="Direcci√≥n">

                <select id="region" required>
                    <option value="">Seleccione Regi√≥n</option>
                </select>

                <select id="ciudad" required>
                    <option value="">Seleccione Comuna</option>
                </select>

                <input type="text" id="unidad" placeholder="Unidad o Departamento">
                <input type="date" id="fecha">
                <input type="text" id="responsable" placeholder="Responsable">

                <div>
                    <input type="text" id="rutUsuario" placeholder="RUT Usuario (12.345.678-9)" maxlength="12" required>
                    <small id="errorRutUsuario" class="error-message"></small>
                </div>

                <input type="email" id="emailUsuario" placeholder="Email Usuario">
                <input type="text" id="telefono" placeholder="Tel√©fono">
                <input type="text" id="cargoUsuario" placeholder="Cargo Usuario">
            </div>

            <h3>Series de Equipos</h3>
            <div class="grid-2">
                <div>
                    <span class="series-pill">EQUIPO SALIENTE</span>
                    <input type="text" id="serieSaliente" placeholder="N¬∞ de serie" required>
                </div>
                <div>
                    <span class="series-pill">EQUIPO RECAMBIO</span>
                    <input type="text" id="serieRecambio" placeholder="N¬∞ de serie" required>
                </div>
            </div>
        </section>

        <!-- CHECKLIST -->
        <section class="card">
            <h2><span class="section-icon">‚úÖ</span> Checklist</h2>
            <div class="checklist-row">
                <div class="checklist-column">
                    <h3>Instalaci√≥n</h3>
                    <div class="check-counter">Completadas: <span class="count-badge" id="countInstalacion">0 / 13</span></div>
                    <div class="checklist instalacion">
                        <label><input type="checkbox"><span class="check-label-text">Desembalaje, revisi√≥n e instalaci√≥n f√≠sica del equipo</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Instalaci√≥n de PC y conexi√≥n de componentes b√°sicos (mouse, teclado y torre)</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Verificaci√≥n de conexi√≥n adecuada a la toma de corriente</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Instalaci√≥n y configuraci√≥n de perif√©ricos adicionales (esc√°ner, impresora, fax, etc.)</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Configuraci√≥n y conexi√≥n a red de datos</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Configuraci√≥n IP Equipo</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Instalaci√≥n y personalizaci√≥n de aplicaciones desde el servidor de red</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Definici√≥n y configuraci√≥n del servicio de impresi√≥n</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Migraci√≥n de informaci√≥n del usuario desde su equipo antiguo</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Conexi√≥n final del equipo a la red</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Verificaci√≥n de agente en l√≠nea con mesa de ayuda</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Configuraci√≥n de correo electr√≥nico del usuario</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Configuraci√≥n de pie de firma en correo</span></label>
                    </div>
                </div>

                <div class="checklist-column">
                    <h3>Validaci√≥n</h3>
                    <div class="check-counter">Completadas: <span class="count-badge" id="countValidacion">0 / 4</span></div>
                    <div class="checklist validacion">
                        <label><input type="checkbox"><span class="check-label-text">N√∫mero de serie del equipo</span></label>
                        <label><input type="checkbox"><span class="check-label-text">N¬∞ Gu√≠a de despacho</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Revisi√≥n del sistema operativo y software instalados</span></label>
                        <label><input type="checkbox"><span class="check-label-text">Entrega formal del equipo con formulario de ingreso</span></label>
                    </div>
                </div>
            </div>

            <div style="text-align:center; margin-top:20px;">
                <button type="button" class="select-all-global btn btn-primary" disabled>
                    <span class="btn-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5c-1.1 0-2 .9-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                    </span>
                    <span class="btn-text">Seleccionar todo</span>
                </button>
            </div>
        </section>

        <!-- OBSERVACIONES -->
        <section class="card">
            <h2><span class="section-icon">üìù</span> Observaciones</h2>
            <label for="observacionTecnico" style="display:block;font-size:13px;font-weight:600;color:var(--gray-600);margin-bottom:8px;">
                Escriba aqu√≠ cualquier inconveniente o detalle relevante durante la instalaci√≥n/validaci√≥n:
            </label>
            <textarea id="observacionTecnico" rows="5" placeholder="Describa problemas, pasos adicionales, referencias..."></textarea>
        </section>

        <!-- DATOS T√âCNICO -->
        <section class="card">
            <h2><span class="section-icon">üîß</span> Datos T√©cnico</h2>
            <div class="grid-2">
                <input type="text" id="tecnico" placeholder="T√©cnico Instalador">
                <div>
                    <input type="text" id="rutTecnico" placeholder="RUT T√©cnico (12.345.678-9)" maxlength="12" required>
                    <small id="errorRutTecnico" class="error-message"></small>
                </div>
            </div>
        </section>

        <!-- DATOS USUARIO / RESPONSABLE -->
        <section class="card">
            <h2><span class="section-icon">üë®‚Äçüíº</span> Datos Usuario / Responsable MINSAL</h2>

            <div class="grid-2">
                <input type="text" id="nombreUsuario" placeholder="Nombre Completo" required>
                <input type="text" id="cargoUsuarioFirma" placeholder="Cargo" required>
                <input type="text" id="unidadUsuario" placeholder="Unidad o Departamento">
                <input type="email" id="correoUsuario" placeholder="Correo">
                <input type="text" id="telefonoUsuario" placeholder="Tel√©fono">
            </div>

            <h3>Firma Digital</h3>
            <p style="font-size:13px;color:var(--gray-600);margin-bottom:12px;">Firme con el mouse en el √°rea de abajo</p>

            <div class="firma-container">
                <canvas id="signaturePad"></canvas>
                <div class="firma-placeholder" id="firmaPlaceholder">
                    <span class="ph-icon">‚úçÔ∏è</span>
                    Firme aqu√≠
                </div>
            </div>

            <div class="firma-buttons">
                <button type="button" class="btn-limpiar" onclick="clearSignature()">üóë Limpiar Firma</button>
                <button type="button" class="btn-confirmar" onclick="saveSignature()">‚úî Confirmar Firma</button>
            </div>

            <div class="firma-confirmed" id="firmaConfirmada">
                ‚úî Firma confirmada correctamente
            </div>

            <input type="hidden" id="firmaBase64">

            <div class="acciones-finales">
                <button type="button" onclick="generarPDF()" class="submit-btn">
                    üìÑ Generar PDF
                </button>
                <button type="button" id="btnNuevaActa" class="nueva-acta-btn" style="display:none;">
                    üÜï Crear otra acta
                </button>
            </div>
        </section>

    </form>
</div>

<script src="regiones-comunas.js"></script>
<script src="organismos.js"></script>
<script src="acta-template.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="script.js"></script>

</body>
</html>